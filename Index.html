<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" charset="utf-8" lang="es" translate="no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="rebeccapurple">
    <title>[MAsk]</title>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-3.1.1.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/bootbox.min.js"></script>
    <script src="Scripts/moment-with-locales.min.js"></script>
    <script src="Scripts/jquery.validate.min.js"></script>
    <script src="Scripts/js-cookie/js.cookie-2.1.3.min.js"></script>
    <script src="Scripts/tinymce/tinymce.min.js"></script>
    <script src="Scripts/vue.js"></script>
    <script src="Scripts/vue-resourse.js"></script>
    <link href="Content/comun.css" rel="stylesheet" />
    <script src="Scripts/comentar.js"></script>
    <script>
        moment.locale('es');
        //$(document).ready(function () {
        //    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        //        $('.tab-pane').css('padding', '1%');
        //    } else {
        //        $('.tab-pane').css('padding-top', '1%');
        //        $('.tab-pane').css('padding-left', '20%');
        //        $('.tab-pane').css('padding-right', '20%');
        //    }
        //});
    </script>
    <style>
        [v-cloak] {
            display: none;
        }
    </style>
</head>

<body>
    <nav id="boarlinks" class="navbar randomColor" style="background-color: rebeccapurple; margin-bottom: 0px; border-radius: 0px;">
        <ol class="breadcrumb" style="white-space:nowrap;overflow-x:auto;">
            <li><a href="..">Home</a></li>
            <li v-cloak v-for="link in links"><a :href="link.url">{{link.Name}}</a></li>
        </ol>
        <div class="randomColor" style="background-color: rebeccapurple;text-align: center;">
            <div v-if="path != 'home'">
                <h1 style="margin-top: -1px;">
                    <label>{{path}}</label>
                </h1>
                <label style="margin-bottom: -2px;">
                    {{des}}
                </label>
            </div>
            <div v-else>
                <h1 style="margin-top: -1px;">
                    <label>MAsk</label><kbd data-toggle="modal" data-target=".versionModal">ß</kbd>
                </h1>
                <label>
                    The Massive Ask
                </label>
            </div>

        </div>
    </nav>
    <script>
        var path = window.location.pathname;

        var boarlinks = new Vue({
            el: '#boarlinks',
            data: {
                links: [],
                path: path,
                des: '',
                color: ''
            },
            methods: {
                cargarLinks() {
                    this.$http.post('zoe.asmx/BoardLinks')
                        .then(function (response) {
                            this.links = response.body.d;
                            if (this.path.length != 1) {
                                let tmp = response.body.d.filter(x => x.url == path.substring(1))[0];
                                this.path = tmp.Name;
                                this.des = tmp.Descripcion;
                                this.color = tmp.Color;
                            } else {
                                this.path = 'home'
                            }
                        })
                }
            },
            created: function () {
                this.cargarLinks();
            }
        })
    </script>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist" style="background-color:rebeccapurple;">
        <li role="presentation"><a href="#FAQ" aria-controls="FQA" role="tab" data-toggle="tab">FAQ</a></li>
        <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Home</a></li>
        <li role="presentation"><a href="#rules" aria-controls="rules" role="tab" data-toggle="tab">Reglas</a></li>
        <li role="presentation" style="margin-right: 0px;" class="navbar-right"><a href="#registrar" aria-controls="registrar" role="tab" data-toggle="tab">Registrar</a></li>
        <li role="presentation" class="navbar-right"><a href="#entrar" aria-controls="entrar" role="tab" data-toggle="tab">Entrar</a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane fade in active" id="home">
            <div id="post" class="col-sm-offset-2 col-sm-8">
                <table v-cloak v-for="pst in posts" class="auto-style2" style="border-bottom: 1px solid #ccd6dd;width: 100%">
                    <tbody>
                        <tr>
                            <td class="auto-style3">
                                <div v-html="pst.User != '---' ? (pst.Mask != 'Anónimo' ? '<a>'+pst.User+'</a> ['+pst.Mask+']' : '<a>'+pst.User+'</a>') : pst.Mask"></div>
                            </td>
                            <td class="auto-style3" style="text-align:right"><abbr title="pst.Date | fecha">{{pst.Date | now}}</abbr><div v-if="b=='/'"> en <label><a href="pst.BoardLink">{{pst.BoardName}}</a></label></div></td>
                        </tr>
                        <tr>
                            <td class="hide"><img src="" alt="Alternate Text"><video controls="controls"><source src="n/a" type="video/mp4"><source src="n/a" type="video/webm"></video></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <p style="text-align: center;">
                                    <blockquote>
                                        <div v-html="pst.Content"></div>
                                    </blockquote>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td class="auto-style3" :id="'estado'+pst.ID">Aplausos:{{pst.Aplausos}} Piedra:{{pst.Piedra}} Papel:{{ pst.Papel}}Tijeras:{{pst.Tijeras}}</td>
                            <td style="text-align:right"><a style="cursor: pointer;" :onclick="'comentar('+pst.ID+');'">Comentarios: <label id="'commentNumber'+pst.ID">{{pst.Comments}}</label></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <script>
                var post = new Vue({
                    el: '#post',
                    data: {
                        b: path,
                        posts: []
                    },
                    methods: {
                        Posts() {
                            this.$http.post(path.length == 1 ? 'zoe.asmx/Last' : 'zoe.asmx/Posts', {
                                board: path.length == 1 ? 0 : 'dev'
                            })
                                .then(function (response) {
                                    this.posts = response.body.d;
                                })
                                .catch(function (error) {
                                    // TODO : Falta por controlar
                                })
                        },
                    },
                    filters: {
                        fecha: (function (data) {
                            return moment(data).format('LLLL');
                        }),
                        now: (function (data) {
                            return moment(data).fromNow();
                        })
                    },
                    created: function () {
                        this.Posts();
                    }
                })
            </script>
        </div>
        <div role="tabpanel" class="tab-pane fade" id="FAQ">
            <dl>
                <dt>¿Qué es MAsk?</dt>
                <dd>Un (no)sencillo tablón de texto. Donde cada tablon es dedicado a un tema en especifico.</dd>
                <dt>¿Qué se hace aquí?</dt>
                <dd>En escencia escibir y leer; escribes lo que piensas sobre un cierto tema, y leer lo que la gente piensa sobre ese mismo tema.</dd>
                <dt>¿Cómo puedo ayudar?</dt>
                <dd>
                    <ul>
                        <li>Comparte la página, mientras más gente juegue es mas divertido.</li>
                        <li>En el Tablon <a href="dev">/dev/</a> Comenta bugs que encuentres y/o funciones que pueden servir para MAsk (empezando con funciones fáciles).</li>
                    </ul>
                </dd>
                <dt>¿No existe una App?</dt>
                <dd>Por ahora que es una Beta no creo que sea necesario, pero puedes crear un acceso directo.</dd>
                <dd>
                    <ul>
                        <li>En Android(Chrome): Opciones>Añadir a pantalla de inicio. (Recomendado)</li>
                        <li>En Windows(Chrome): Arrastra el icono que esta antes de dirección de la pagina hasta el escritorio.</li>
                    </ul>
                </dd>
            </dl>
        </div>
        <div role="tabpanel" class="tab-pane fade" id="rules">
            <ol>
                <li>Respetar el tema del Post</li>
            </ol>
        </div>
        <div role="tabpanel" class="tab-pane fade" id="entrar">
            ...
        </div>
        <div role="tabpanel" class="tab-pane fade" id="registrar">
            ...
        </div>
    </div>
    <div class="modal fade versionModal" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel">MAsk β Version 0.1.4</h4>
                </div>
                <div class="modal-body">
                    <dl>
                        <dt>0.1.4</dt>
                        <dd>???</dd>
                        <dt>0.1.3</dt>
                        <dd>Cambios Internos de Servidor y Base de Datos, no afecta a los Usuarios.</dd>
                        <dt>0.1.2</dt>
                        <dd>Correciones Menores.</dd>
                        <dt>0.1.1</dt>
                        <dd>Correciones Menores.</dd>
                        <dt>0.1.0</dt>
                        <dd>Comienzo de Beta Abierta.</dd>
                    </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <div class="modal fade commentModal" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="postStatus"></h4>
                </div>
                <div class="modal-body" style="max-height:80vh;overflow-y:auto" id="comments">
                </div>
                <div class="modal-footer" id="posting">
                    <textarea id="Contenidoo"></textarea>
                    <br />
                    <div class="row" id="crearCliente">
                        <div class="col-xs-9 col-md-10">
                            <select id="SelectMaskCo" class="form-control">
                                <option value="0">selecciona Mask</option>
                            </select>
                            <!--<script>
                                $.ajax({
                                    type: "POST",
                                    url: '/Home/Mask/',
                                    data: "{ 'userId':'" + Cookies.get('ID') + "'}",
                                    content: "json",
                                    contentType: "application/json",
                                    error: function (xhr) {
                                        bootbox.alert('Ha ocurrido algun tipo de error');
                                    },
                                    success: function (data) {
                                        $.each(data, function (key, value) {
                                            $('<option value="' + value.ID + '">' + value.Name + '</option>').appendTo('#SelectMaskCo');
                                        });
                                    }
                                });
                            </script>-->
                        </div>
                        <div class="col-xs-2 col-md-2">
                            <button id="comentar" type="button" class="btn btn-default">Post!</button>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
</body>
</html>
