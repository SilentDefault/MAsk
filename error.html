<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" charset="utf-8" lang="es" translate="no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="rebeccapurple">
    <title>[MAsk]</title>
    <script src="Scripts/jquery-3.1.1.min.js"></script>
    <script src="Scripts/moment-with-locales.min.js"></script>
    <script src="Scripts/jquery.validate.min.js"></script>
    <script src="Scripts/js-cookie/js.cookie-2.1.3.min.js"></script>
    <script src="Scripts/tinymce/tinymce.min.js"></script>
    <script src="Scripts/vue.js"></script>
    <script src="Scripts/vue-resourse.js"></script>
    <link href="Content/comun.css" rel="stylesheet" />
    <script src="Scripts/comentar.js"></script>
    <link href="Content/bulma.css" rel="stylesheet" />
</head>
<body>
    <!-- navbar -->
    <header id="boarlinks" style="background-color: rebeccapurple;">
        <ol class="breadcrumb" style="white-space:nowrap;overflow-x:auto;">
            <li><a href="..">Home</a></li>
            <li v-cloak v-for="link in links"><a :href="link.url">{{link.Name}}</a></li>
        </ol>
        <div style="background-color: rebeccapurple; text-align: center;">
            <div v-if="path != 'home'">
                <h1>
                    <label>{{path}}</label>
                </h1>
                <label>
                    {{des}}
                </label>
            </div>
            <div v-else>
                <h1>
                    <label>MAsk</label><kbd>ß</kbd>
                </h1>
                <label>
                    The Massive Ask
                </label>
            </div>
        </div>
    </header>
    <script>
        var path = window.location.pathname;

        var boarlinks = new Vue({
            el: '#boarlinks',
            data: {
                links: [],
                path: path,
                des: '',
                color: ''
            },
            methods: {
                cargarLinks() {
                    this.$http.post('zoe.asmx/BoardLinks')
                        .then(function (response) {
                            this.links = response.body.d;
                            if (this.path.length != 1) {
                                let tmp = response.body.d.filter(x => x.url == path.substring(1))[0];
                                this.path = tmp.Name;
                                this.des = tmp.Descripcion;
                                this.color = tmp.Color;
                            } else {
                                this.path = 'home'
                            }
                        })
                }
            },
            created: function () {
                this.cargarLinks();
            }
        })
    </script>
    <!-- tabs -->
    <div class="tabs is-boxed" data-bulma="tabs" style="background-color:rebeccapurple;">
        <ul>
            <li><a data-tab="#faq">span</a></li>
            <li class="is-active"><a data-tab="#home">Home</a></li>
            <li><a data-tab="#rules">Reglas</a></li>
        </ul>
        <ul>
            <li><a>Registar</a></li>
            <li><a>Entrar</a></li>
        </ul>
    </div>
    <!-- contentPanels -->
    <div>
        <section class="section" id="faq">
            <dl>
                <dt>¿Qué es MAsk?</dt>
                <dd>Un (no)sencillo tablón de texto. Donde cada tablon es dedicado a un tema en especifico.</dd>
                <dt>¿Qué se hace aquí?</dt>
                <dd>En escencia escibir y leer; escribes lo que piensas sobre un cierto tema, y leer lo que la gente piensa sobre ese mismo tema.</dd>
                <dt>¿Cómo puedo ayudar?</dt>
                <dd>
                    <ul>
                        <li>Comparte la página, mientras más gente juegue es mas divertido.</li>
                        <li>En el Tablon <a href="dev">/dev/</a> Comenta bugs que encuentres y/o funciones que pueden servir para MAsk (empezando con funciones fáciles).</li>
                    </ul>
                </dd>
                <dt>¿No existe una App?</dt>
                <dd>Por ahora que es una Beta no creo que sea necesario, pero puedes crear un acceso directo.</dd>
                <dd>
                    <ul>
                        <li>En Android(Chrome): Opciones>Añadir a pantalla de inicio. (Recomendado)</li>
                        <li>En Windows(Chrome): Arrastra el icono que esta antes de dirección de la pagina hasta el escritorio.</li>
                    </ul>
                </dd>
            </dl>
        </section>
        <div id="home">
            <div id="post" class="">
                <table v-cloak v-for="pst in posts" class="auto-style2" style="border-bottom: 1px solid #ccd6dd;width: 100%">
                    <tbody>
                        <tr>
                            <td class="auto-style3">
                                <div v-html="pst.User != '---' ? (pst.Mask != 'Anónimo' ? '<a>'+pst.User+'</a> ['+pst.Mask+']' : '<a>'+pst.User+'</a>') : pst.Mask"></div>
                            </td>
                            <td class="auto-style3" style="text-align:right"><abbr title="pst.Date | fecha">{{pst.Date | now}}</abbr><div v-if="b=='/'"> en <label><a href="pst.BoardLink">{{pst.BoardName}}</a></label></div></td>
                        </tr>
                        <tr>
                            <td hidden><img src="" alt="Alternate Text"><video controls="controls"><source src="n/a" type="video/mp4"><source src="n/a" type="video/webm"></video></td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <p style="text-align: center;">
                                    <div v-html="pst.Content"></div>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td class="auto-style3" :id="'estado'+pst.ID">Aplausos:{{pst.Aplausos}} Piedra:{{pst.Piedra}} Papel:{{ pst.Papel}}Tijeras:{{pst.Tijeras}}</td>
                            <td style="text-align:right"><a style="cursor: pointer;" :onclick="'comentar('+pst.ID+');'">Comentarios: <label id="'commentNumber'+pst.ID">{{pst.Comments}}</label></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <script>
                var post = new Vue({
                    el: '#post',
                    data: {
                        b: path,
                        posts: []
                    },
                    methods: {
                        Posts() {
                            this.$http.post(path.length == 1 ? 'zoe.asmx/Last' : 'zoe.asmx/Posts', {
                                board: path.length == 1 ? 0 : 'dev'
                            })
                                .then(function (response) {
                                    this.posts = response.body.d;
                                })
                                .catch(function (error) {
                                    // TODO : Falta por controlar
                                })
                        },
                    },
                    filters: {
                        fecha: (function (data) {
                            return moment(data).format('LLLL');
                        }),
                        now: (function (data) {
                            return moment(data).fromNow();
                        })
                    },
                    created: function () {
                        this.Posts();
                    }
                })
            </script>
        </div>
        <section class="section" id="rules">
            <h3 class="title">
                Tab 3
            </h3>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
        </section>
    </div>
    <script src="Scripts/bulma.js"></script>
</body>
</html>
